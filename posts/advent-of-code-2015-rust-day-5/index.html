<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.5.1"><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Learning Rust with Advent of Code - Day 5" /><meta name="author" content="David & Felipe" /><meta property="og:locale" content="en_US" /><meta name="description" content="2015 Day 5: Count the number of strings, from a given list, which fit a number of strange syntax / character requirements. We don&#39;t find big optimizations, but at 2.4 milliseconds, we don&#39;t need to." /><meta property="og:description" content="2015 Day 5: Count the number of strings, from a given list, which fit a number of strange syntax / character requirements. We don&#39;t find big optimizations, but at 2.4 milliseconds, we don&#39;t need to." /><link rel="canonical" href="http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/" /><meta property="og:url" content="http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/" /><meta property="og:site_name" content="Hall of Impossible Dreams" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-13T13:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Learning Rust with Advent of Code - Day 5" /><meta name="twitter:site" content="@thecog19" /><meta name="twitter:creator" content="@David & Felipe" /><meta name="google-site-verification" content="rOMa9oYHtFBq7U58IniOX1gggI6noWpOXoWBk-9hItk" /> <script type="application/ld+json"> {"description":"2015 Day 5: Count the number of strings, from a given list, which fit a number of strange syntax / character requirements. We don&#39;t find big optimizations, but at 2.4 milliseconds, we don&#39;t need to.","@type":"BlogPosting","headline":"Learning Rust with Advent of Code - Day 5","url":"http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/","dateModified":"2021-04-13T13:00:00-04:00","datePublished":"2021-04-13T13:00:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/"},"author":{"@type":"Person","name":"David & Felipe"},"@context":"https://schema.org"}</script><title>Learning Rust with Advent of Code - Day 5 | Hall of Impossible Dreams</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script async src="https://www.googletagmanager.com/gtag/js?id=G-QGYEJ40C64"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-QGYEJ40C64'); </script> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Hall of Impossible Dreams</a></div><div class="site-subtitle font-italic">A repository of code, fiction, nonfiction, and poetry.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/hallofdreams" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/thecog19" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['felipe.suero19','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Learning Rust with Advent of Code - Day 5</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Learning Rust with Advent of Code - Day 5</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Apr 13, 2021, 1:00 PM -0400" > Apr 13, 2021 <i class="unloaded">2021-04-13T13:00:00-04:00</i> </span> <span class="author"> by David & Felipe </span></div></div><div class="post-content"><h3>Series Navigation</h3><li><a href="/posts/advent-of-code-2015-rust-day-1/">Learning Rust with Advent of Code - Day 1</a><li><a href="/posts/advent-of-code-2015-rust-day-2/">Learning Rust with Advent of Code - Day 2</a><li><a href="/posts/advent-of-code-2015-rust-day-3/">Learning Rust with Advent of Code - Day 3</a><li><a href="/posts/advent-of-code-2015-rust-day-4/">Learning Rust with Advent of Code - Day 4</a><li><b>Learning Rust with Advent of Code - Day 5</b><li><a href="/posts/advent-of-code-2015-rust-day-6/">Learning Rust with Advent of Code - Day 6</a></div><hr><div class="post-content"><div style="display:none;">2015 Day 5: Count the number of strings, from a given list, which fit a number of strange syntax / character requirements. We don't find big optimizations, but at 2.4 milliseconds, we don't need to.</div><h1 id="day-5"><a href="https://www.adventofcode.com/2015/day/5">Day 5</a></h1><p>The problem: you’re given a list of strings, each sixteen characters long.</p><p><strong>Part 1</strong>: Count the strings matching all of the following criteria:</p><ul><li>Contains at least three vowels.<li>Contains at least one letter appearing twice in a row (such as <code class="language-plaintext highlighter-rouge">xx</code>).<li>Does not contain the strings <code class="language-plaintext highlighter-rouge">ab</code>, <code class="language-plaintext highlighter-rouge">cd</code>, <code class="language-plaintext highlighter-rouge">pq</code>, or <code class="language-plaintext highlighter-rouge">xy</code>.</ul><p><strong>Part 2</strong>: Count the strings matching all of the following criteria:</p><ul><li>Contains at least one letter which repeats with exactly one letter in between (such as <code class="language-plaintext highlighter-rouge">xyx</code>).<li>Contains a pair of two letters which appear at least twice without overlap.</ul><hr /><h1 id="david">David</h1><p>Computationally, the second requirement of part 2 is going to be the most expensive one; I’ll have to either check every pair of strings or create a <code class="language-plaintext highlighter-rouge">HashMap</code> for every string. I’ll probably do the latter; I can initialize the <code class="language-plaintext highlighter-rouge">HashMap</code> with exactly the size I need (and I’ll throw in an <code class="language-plaintext highlighter-rouge">!assert()</code> to make sure that there aren’t any strings longer than 16 characters), and fill it in as I go. But I’ll start with part 1, regardless.</p><h2 id="attempt-00">Attempt 0.0</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="sc">'f'</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">check</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">);</span>
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Check on {} returns {}."</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">check</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Finished dev [unoptimized + debuginfo] target(s) in 0.20s
 Running `target/debug/day_5`
Check returns false.
</pre></table></code></div></div><p>So far, so good. I’m starting to understand the concept of references and ownership: by defining my <code class="language-plaintext highlighter-rouge">is_vowel()</code> function as operating on references instead of values, I can check if a character is a vowel without taking it out of scope. With that function in place, let me set up the basic framework for the rest of the problem.</p><h2 id="attempt-01">Attempt 0.1</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">input_raw</span><span class="nf">.lines</span><span class="p">();</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">lines</span> <span class="p">{</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">let</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">line</span><span class="nf">.chars</span><span class="p">();</span>
		
		<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">chars</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;}</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="p">{</span>
			<span class="n">part1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">}</span>
	
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 1: {}"</span><span class="p">,</span> <span class="n">part1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Finished dev [unoptimized + debuginfo] target(s) in 0.26s
 Running `target/debug/day_5`
Part 1: 614
</pre></table></code></div></div><p>Not the right answer, of course, since I’m only checking one of the three requirements for part 1, but the code runs without error. Now, the second requirement.</p><h2 id="attempt-02">Attempt 0.2</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">input_raw</span><span class="nf">.lines</span><span class="p">();</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">lines</span> <span class="p">{</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">let</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">line</span><span class="nf">.chars</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		
		<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">chars</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;};</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">last_char</span> <span class="p">{</span><span class="n">double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			<span class="n">last_char</span> <span class="o">=</span> <span class="n">c</span><span class="nf">.clone</span><span class="p">();</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">double</span> <span class="p">{</span>
			<span class="n">part1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">}</span>
	
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 1: {}"</span><span class="p">,</span> <span class="n">part1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Finished dev [unoptimized + debuginfo] target(s) in 0.27s
 Running `target/debug/day_5`
Part 1: 269
</pre></table></code></div></div><p>Second requirement for part 1 complete; let’s get the third.</p><h2 id="attempt-03">Attempt 0.3</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="n">c1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">,</span> <span class="n">c2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">"ab"</span> <span class="p">|</span> <span class="s">"cd"</span> <span class="p">|</span> <span class="s">"pq"</span> <span class="p">|</span> <span class="s">"xy"</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>error[E0277]: a value of type `String` cannot be built from an iterator over elements of type `&amp;&amp;char`

s = [c1, c2].iter().collect::&lt;String&gt;();
                    ^^^^^^^ value of type `String` cannot be built from `std::iter::Iterator&lt;Item=&amp;&amp;char&gt;`
</pre></table></code></div></div><p>Okay, that was careless. I forgot that since I was already passing in <code class="language-plaintext highlighter-rouge">&amp;</code> references, and <code class="language-plaintext highlighter-rouge">.iter()</code> creates references, I needed to dereference them with <code class="language-plaintext highlighter-rouge">*</code> first, or else I’d have a reference to a reference.</p><h2 id="attempt-04">Attempt 0.4</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">fn</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="n">c1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">,</span> <span class="n">c2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">c1</span><span class="p">,</span> <span class="o">*</span><span class="n">c2</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">"ab"</span> <span class="p">|</span> <span class="s">"cd"</span> <span class="p">|</span> <span class="s">"pq"</span> <span class="p">|</span> <span class="s">"xy"</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>error[E0308]: mismatched types

matches!(s, "ab" | "cd" | "pq" | "xy")
         -  ^^^^ expected struct `String`, found `&amp;str`
         |
         this expression has type `String`
</pre></table></code></div></div><p>This is a problem; if I were using an <code class="language-plaintext highlighter-rouge">if</code> statement, I could just call <code class="language-plaintext highlighter-rouge">.to_string()</code> on each of the illegal substrings and convert them from <code class="language-plaintext highlighter-rouge">&amp;str</code>, but the <code class="language-plaintext highlighter-rouge">matches!</code> macro doesn’t allow for in-place functions like that, only primitives. We’ll have to do it the hard way:</p><h2 id="attempt-05">Attempt 0.5</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="n">c1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">,</span> <span class="n">c2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">c1</span><span class="p">,</span> <span class="o">*</span><span class="n">c2</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="p">[</span><span class="s">"ab"</span><span class="p">,</span><span class="s">"cd"</span><span class="p">,</span><span class="s">"pq"</span><span class="p">,</span><span class="s">"xy"</span><span class="p">]</span>
		<span class="nf">.iter</span><span class="p">()</span>
		<span class="nf">.any</span><span class="p">(|</span><span class="o">&amp;</span><span class="n">i</span><span class="p">|</span> <span class="n">i</span><span class="o">==</span><span class="n">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">input_raw</span><span class="nf">.lines</span><span class="p">();</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">lines</span> <span class="p">{</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">let</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">line</span><span class="nf">.chars</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">all_legal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
		
		<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">chars</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;};</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">last_char</span> <span class="p">{</span><span class="n">double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			<span class="k">if</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="o">&amp;</span><span class="n">last_char</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">all_legal</span> <span class="o">=</span> <span class="k">false</span><span class="p">};</span>
			<span class="n">last_char</span> <span class="o">=</span> <span class="n">c</span><span class="nf">.clone</span><span class="p">();</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="n">all_legal</span> <span class="p">{</span>
			<span class="n">part1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">}</span>
	
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 1: {}"</span><span class="p">,</span> <span class="n">part1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Finished dev [unoptimized + debuginfo] target(s) in 0.29s
 Running `target/debug/day_5`
Part 1: 255
</pre></table></code></div></div><p>First star acquired! I’m trying to get used to making functions, passing in arguments, using iterators, and all the other idiomatic Rust ways of doing things; not only will doing so help me understand other people’s Rust code, but it should hopefully run faster to boot. Next up is the first requirement of part 2, the requirement for a character to appear twice with exactly one character between.</p><h2 id="attempt-10">Attempt 1.0</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="n">c1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">,</span> <span class="n">c2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">c1</span><span class="p">,</span> <span class="o">*</span><span class="n">c2</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="p">[</span><span class="s">"ab"</span><span class="p">,</span><span class="s">"cd"</span><span class="p">,</span><span class="s">"pq"</span><span class="p">,</span><span class="s">"xy"</span><span class="p">]</span>
		<span class="nf">.iter</span><span class="p">()</span>
		<span class="nf">.any</span><span class="p">(|</span><span class="o">&amp;</span><span class="n">i</span><span class="p">|</span> <span class="n">i</span><span class="o">==</span><span class="n">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">input_raw</span><span class="nf">.lines</span><span class="p">();</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part2</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">lines</span> <span class="p">{</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">let</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">line</span><span class="nf">.chars</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">all_legal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
		
		<span class="k">let</span> <span class="k">mut</span> <span class="n">second_to_last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">offset_double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		
		<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">chars</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;};</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">last_char</span> <span class="p">{</span><span class="n">double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			<span class="k">if</span> <span class="n">all_legal</span> <span class="o">&amp;&amp;</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="o">&amp;</span><span class="n">last_char</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">all_legal</span> <span class="o">=</span> <span class="k">false</span><span class="p">};</span>
			
			<span class="k">if</span> <span class="o">!</span><span class="n">offset_double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">second_to_last_char</span> <span class="p">{</span><span class="n">offset_double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			
			<span class="n">second_to_last_char</span> <span class="o">=</span> <span class="n">last_char</span><span class="nf">.clone</span><span class="p">();</span>
			<span class="n">last_char</span> <span class="o">=</span> <span class="n">c</span><span class="nf">.clone</span><span class="p">();</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="n">all_legal</span> <span class="p">{</span>
			<span class="n">part1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="k">if</span> <span class="n">offset_double</span> <span class="p">{</span>
			<span class="n">part2</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 1: {}"</span><span class="p">,</span> <span class="n">part1</span><span class="p">);</span>
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 2: {}"</span><span class="p">,</span> <span class="n">part2</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Finished release [optimized] target(s) in 0.35s
 Running `target/release/day_5`
Part 1: 255
Part 2: 412
</pre></table></code></div></div><p>So far, so good, but that was the easy part. Right now, I’m initializing my buffer characters with <code class="language-plaintext highlighter-rouge">' '</code>; if the strings contained spaces, this could be bad, but I’m willing to take the shortcut because I know that they don’t. Having buffer characters will also make the next step easier.</p><h2 id="attempt-11">Attempt 1.1</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="o">...</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">substrings</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">contains_repeat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="o">...</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">contains_repeat</span> <span class="o">&amp;&amp;</span> <span class="n">substrings</span><span class="nf">.contains_key</span><span class="p">([</span><span class="n">last_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">())</span> <span class="p">{</span><span class="n">contains_repeat</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>		
			<span class="n">substrings</span><span class="nf">.insert</span><span class="p">(</span>
				<span class="p">[</span><span class="n">second_to_last_char</span><span class="p">,</span> <span class="n">last_char</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">()</span>
			<span class="p">);</span>
<span class="o">...</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>error[E0433]: failed to resolve: use of undeclared type `HashMap`
let mut substrings = HashMap::new();
                     ^^^^^^^ not found in this scope
</pre></table></code></div></div><p>Of all things, I forget to import the <code class="language-plaintext highlighter-rouge">HashMap</code> type. Okay, let’s try again.</p><h2 id="attempt-12">Attempt 1.2</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="o">...</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">substrings</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">contains_repeat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="o">...</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">contains_repeat</span> <span class="o">&amp;&amp;</span> <span class="n">substrings</span><span class="nf">.contains_key</span><span class="p">([</span><span class="n">last_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">())</span> <span class="p">{</span><span class="n">contains_repeat</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>		
			<span class="n">substrings</span><span class="nf">.insert</span><span class="p">(</span>
				<span class="p">[</span><span class="n">second_to_last_char</span><span class="p">,</span> <span class="n">last_char</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">()</span>
			<span class="p">);</span>
<span class="o">...</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>error[E0061]: this function takes 2 arguments but 1 argument was supplied

substrings.insert(
           ^^^^^^ expected 2 arguments
    [second_to_last_char, last_char].iter().collect::&lt;String&gt;()
    ----------------------------------------------------------- supplied 1 argument
</pre></table></code></div></div><p>Since this is the second time the structure has come up, perhaps I should make my own version of a <code class="language-plaintext highlighter-rouge">HashMap</code>, which only checks for <code class="language-plaintext highlighter-rouge">.contains()</code> and doesn’t need a value associated with it. But it’s easy enough to fix.</p><h2 id="attempt-13">Attempt 1.3</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="o">...</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">substrings</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">contains_repeat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="o">...</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">contains_repeat</span> <span class="o">&amp;&amp;</span> <span class="n">substrings</span><span class="nf">.contains_key</span><span class="p">([</span><span class="n">last_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">())</span> <span class="p">{</span><span class="n">contains_repeat</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>		
			<span class="n">substrings</span><span class="nf">.insert</span><span class="p">(</span>
				<span class="p">[</span><span class="n">second_to_last_char</span><span class="p">,</span> <span class="n">last_char</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">(),</span> 
				<span class="k">true</span>
			<span class="p">);</span>
<span class="o">...</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>error[E0308]: mismatched types

if !contains_repeat &amp;&amp; substrings.contains_key([last_char, c].iter().collect::&lt;String&gt;()) {contains_repeat = true};
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                               |
                                               expected reference, found struct `String`
                                               help: consider borrowing here: `&amp;[last_char, c].iter().collect::&lt;String&gt;()`
= note: expected reference `&amp;_`
              found struct `String`
</pre></table></code></div></div><p>I could borrow with a reference, as suggested, but that would cause problems with ownership when it comes time to insert the last substring into the list. I think it’ll be easier to just allocate the current pair beforehand and reference that, rather than mess around with a lengthy one-liner.</p><h2 id="final-version">Final Version</h2><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">time</span><span class="p">::{</span><span class="n">Instant</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="n">c1</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">,</span> <span class="n">c2</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">c1</span><span class="p">,</span> <span class="o">*</span><span class="n">c2</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="p">[</span><span class="s">"ab"</span><span class="p">,</span><span class="s">"cd"</span><span class="p">,</span><span class="s">"pq"</span><span class="p">,</span><span class="s">"xy"</span><span class="p">]</span>
		<span class="nf">.iter</span><span class="p">()</span>
		<span class="nf">.any</span><span class="p">(|</span><span class="o">&amp;</span><span class="n">i</span><span class="p">|</span> <span class="n">i</span><span class="o">==</span><span class="n">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">let</span> <span class="n">start</span> <span class="o">=</span> <span class="nn">Instant</span><span class="p">::</span><span class="nf">now</span><span class="p">();</span>
	
    <span class="k">let</span> <span class="n">file</span> <span class="o">=</span> <span class="s">"../Inputs/Day5Input.txt"</span><span class="p">;</span>
	<span class="k">let</span> <span class="n">input_raw</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
	
	<span class="k">let</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">input_raw</span><span class="nf">.lines</span><span class="p">();</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">let</span> <span class="k">mut</span> <span class="n">part2</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">lines</span> <span class="p">{</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">let</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">line</span><span class="nf">.chars</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">all_legal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
		
		<span class="k">let</span> <span class="k">mut</span> <span class="n">second_to_last_char</span><span class="p">:</span> <span class="nb">char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">offset_double</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">substrings</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
		<span class="k">let</span> <span class="k">mut</span> <span class="n">contains_repeat</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
		
		<span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">chars</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;};</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">last_char</span> <span class="p">{</span><span class="n">double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			<span class="k">if</span> <span class="n">all_legal</span> <span class="o">&amp;&amp;</span> <span class="nf">is_illegal_pair</span><span class="p">(</span><span class="o">&amp;</span><span class="n">last_char</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span><span class="n">all_legal</span> <span class="o">=</span> <span class="k">false</span><span class="p">};</span>
			
			<span class="k">if</span> <span class="o">!</span><span class="n">offset_double</span> <span class="o">&amp;&amp;</span> <span class="o">&amp;</span><span class="n">c</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">second_to_last_char</span> <span class="p">{</span><span class="n">offset_double</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			<span class="k">let</span> <span class="n">current_pair</span> <span class="o">=</span> <span class="p">[</span><span class="n">last_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">contains_repeat</span> <span class="o">&amp;&amp;</span> <span class="n">substrings</span><span class="nf">.contains_key</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_pair</span><span class="p">)</span> <span class="p">{</span><span class="n">contains_repeat</span> <span class="o">=</span> <span class="k">true</span><span class="p">};</span>
			
			<span class="n">substrings</span><span class="nf">.insert</span><span class="p">(</span>
				<span class="p">[</span><span class="n">second_to_last_char</span><span class="p">,</span> <span class="n">last_char</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">(),</span>
				<span class="k">true</span>
			<span class="p">);</span>
			<span class="n">second_to_last_char</span> <span class="o">=</span> <span class="n">last_char</span><span class="nf">.clone</span><span class="p">();</span>
			<span class="n">last_char</span> <span class="o">=</span> <span class="n">c</span><span class="nf">.clone</span><span class="p">();</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">double</span> <span class="o">&amp;&amp;</span> <span class="n">all_legal</span> <span class="p">{</span>
			<span class="n">part1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="k">if</span> <span class="n">offset_double</span> <span class="o">&amp;&amp;</span> <span class="n">contains_repeat</span> <span class="p">{</span>
			<span class="n">part2</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">let</span> <span class="n">end</span> <span class="o">=</span> <span class="n">start</span><span class="nf">.elapsed</span><span class="p">()</span><span class="nf">.as_micros</span><span class="p">();</span>
	
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 1: {}"</span><span class="p">,</span> <span class="n">part1</span><span class="p">);</span>
	<span class="nd">println!</span><span class="p">(</span><span class="s">"Part 2: {}"</span><span class="p">,</span> <span class="n">part2</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Time: {} μs"</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Finished release [optimized] target(s) in 0.44s
 Running `target/release/day_5`
Part 1: 255
Part 2: 55
Time: 2398 μs
</pre></table></code></div></div><p>Part 2 complete!</p><p>Doing this iteratively wasn’t nearly as bad as I thought it was going to be, syntax-wise; despite still making multiple mistakes, I’m starting to anticipate errors before the borrow checker warns me about them, rather than just adding or removing <code class="language-plaintext highlighter-rouge">&amp;</code> at random and hoping for the best. And the runtime continues to amaze me; my Mathematica code ran in 0.16 seconds, so this is a speedup of 700x. I still have five or six tabs open to the documentation at all times, but the frequency at which I check them is, slowly, going down.</p><h1 id="felipe">Felipe</h1><p>Day 5 is… boring. There’s no other word for it. Its a fairly straightforward problem, and it takes someone more clever than I to come up with an exciting optimization. (I’m sure someone has). Dave and I spent a couple hours speculating about potential avenues to optimize, but it turns out its quite hard to improve on doing things in a single pass.</p><p>But enough bellyaching, lets look at the problem. Day 5 asks us to parse a long list of stings, and count how many of them are naughty, and how many are nice. Instinctually by now, we should know we’re going to iterate over the list and do operations on the strings. Scanning the rules:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>It contains at least three vowels (aeiou only), like aei, xazegov, or aeiouaeiouaeiou.
It contains at least one letter that appears twice in a row, like xx, abcdde (dd), or aabbccdd (aa, bb, cc, or dd).
It does not contain the strings ab, cd, pq, or xy, even if they are part of one of the other requirements.
</pre></table></code></div></div><p>It looks like those can all be done in one pass of the string. We can count how many vowels we have as we go through the string, we can keep track of the previous letter, and see if it makes a forbidden string, or a double. So far we have a time of O(n).</p><p>The rules for part 2 are different, but can also probably be done in one pass. To whit:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>It contains a pair of any two letters that appears at least twice in the string without overlapping, like xyxy (xy) or aabcdefgaa (aa), but not like aaa (aa, but it overlaps).
It contains at least one letter which repeats with exactly one letter between them, like xyx, abcdefeghi (efe), or even aaa.
</pre></table></code></div></div><p>The second rule seems straight forward enough. We can keep track of the current letter, and the letter two letters behind. If those two letters ever match, we have what I’m calling a tryptich. The first rule is a little trickier. If we don’t care about memory complexity, we can just keep a dict of every pair of letters in the in the string. If we’re feeling lazy, we can iterate over the string a second time with <code class="language-plaintext highlighter-rouge">word.matches(pair).count() &gt; 1;</code>. Unless its a matter of life and death, I’m happy to be lazy. Dave does it in a much clever way, but given that we get roughly comparable run times, I don’t think it ultimately matters.</p><p>Ultimately, we get a very readable, functional block of code:</p><div class="language-rust highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
</pre><td class="rouge-code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">time</span><span class="p">::{</span><span class="n">Instant</span><span class="p">};</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fs</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">(){</span>
       
        <span class="k">let</span> <span class="n">file</span> <span class="o">=</span><span class="s">"../input.txt"</span><span class="p">;</span>
        <span class="k">let</span> <span class="k">mut</span> <span class="n">input</span><span class="p">:</span> <span class="nb">String</span> <span class="o">=</span> <span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="nf">.unwrap</span><span class="p">();</span>
        <span class="k">let</span> <span class="n">words</span> <span class="o">=</span> <span class="n">input</span><span class="nf">.lines</span><span class="p">();</span>
        <span class="k">let</span> <span class="n">start</span> <span class="o">=</span> <span class="nn">Instant</span><span class="p">::</span><span class="nf">now</span><span class="p">();</span>

        <span class="k">let</span> <span class="k">mut</span> <span class="n">p1</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">let</span> <span class="k">mut</span> <span class="n">p2</span><span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        
        <span class="k">for</span> <span class="n">word</span> <span class="k">in</span> <span class="n">words</span> <span class="p">{</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">vowel_count</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">prev_char</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">two_behind</span> <span class="o">=</span> <span class="sc">' '</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">has_pair</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">has_pair_match</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">p1_checked</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">p2_checked</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">has_tryptic</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">let</span> <span class="k">mut</span> <span class="n">illegal_p1</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="n">word</span><span class="nf">.chars</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="nf">is_illegal</span><span class="p">(</span><span class="n">word</span><span class="p">){</span>
                    <span class="n">illegal_p1</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                    <span class="n">p1_checked</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">prev_char</span> <span class="p">{</span>
                    <span class="n">has_pair</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">){</span>
                    <span class="n">vowel_count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="nf">has_non_overlapping_pair</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="o">&amp;</span><span class="p">[</span><span class="n">prev_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.iter</span><span class="p">()</span><span class="py">.collect</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">()){</span>
                    <span class="n">has_pair_match</span> <span class="o">=</span> <span class="k">true</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="nf">is_tryptic</span><span class="p">([</span><span class="n">two_behind</span><span class="p">,</span> <span class="n">prev_char</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span><span class="nf">.to_vec</span><span class="p">()){</span>
                    <span class="n">has_tryptic</span> <span class="o">=</span> <span class="k">true</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="n">vowel_count</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">has_pair</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">p1_checked</span> <span class="p">{</span>
                    <span class="n">p1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="n">p1_checked</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="n">has_tryptic</span> <span class="o">&amp;&amp;</span> <span class="n">has_pair_match</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">p2_checked</span> <span class="p">{</span>
                    <span class="n">p2</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="n">p2_checked</span> <span class="o">=</span> <span class="k">true</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="n">p1_checked</span> <span class="o">&amp;&amp;</span> <span class="n">p2_checked</span> <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="n">two_behind</span> <span class="o">=</span> <span class="n">prev_char</span><span class="p">;</span>
                <span class="n">prev_char</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"P1: {}"</span><span class="p">,</span> <span class="n">p1</span><span class="p">);</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"P2: {}"</span><span class="p">,</span> <span class="n">p2</span><span class="p">);</span>
        <span class="k">let</span> <span class="n">end</span> <span class="o">=</span> <span class="n">start</span><span class="nf">.elapsed</span><span class="p">()</span><span class="nf">.as_micros</span><span class="p">();</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s"> execution time in microseconds {}"</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_vowel</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">char</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nd">matches!</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="sc">'a'</span> <span class="p">|</span> <span class="sc">'e'</span> <span class="p">|</span> <span class="sc">'i'</span> <span class="p">|</span> <span class="sc">'o'</span> <span class="p">|</span> <span class="sc">'u'</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_tryptic</span><span class="p">(</span><span class="n">arr</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">char</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">has_non_overlapping_pair</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">word</span><span class="nf">.matches</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span><span class="nf">.count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">is_illegal</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">word</span><span class="nf">.contains</span><span class="p">(</span><span class="s">"ab"</span><span class="p">)</span> <span class="p">||</span> <span class="n">word</span><span class="nf">.contains</span><span class="p">(</span><span class="s">"cd"</span><span class="p">)</span> <span class="p">||</span> <span class="n">word</span><span class="nf">.contains</span><span class="p">(</span><span class="s">"pq"</span><span class="p">)</span> <span class="p">||</span> <span class="n">word</span><span class="nf">.contains</span><span class="p">(</span><span class="s">"xy"</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Nothing super inspiring, but it does teach us one lesson: sometimes the most straightforward path is the best path. We discussed doing things with caching and file reading, but ultimately all approaches seem to require iterating over the list at least once… if we’re going to do that, we may as well just solve the problem as we do it. There’s no real way to get around actually <em>reading</em> the data.</p></div><div class="post-content"><h3>Series</h3><li><a href="/posts/advent-of-code-2015-rust-day-1/">Learning Rust with Advent of Code - Day 1</a><li><a href="/posts/advent-of-code-2015-rust-day-2/">Learning Rust with Advent of Code - Day 2</a><li><a href="/posts/advent-of-code-2015-rust-day-3/">Learning Rust with Advent of Code - Day 3</a><li><a href="/posts/advent-of-code-2015-rust-day-4/">Learning Rust with Advent of Code - Day 4</a><li><b>Learning Rust with Advent of Code - Day 5</b><li><a href="/posts/advent-of-code-2015-rust-day-6/">Learning Rust with Advent of Code - Day 6</a></div><hr><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/advent-of-code/'>Advent of Code</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/rust/" class="post-tag no-text-decoration" >rust</a> <a href="/tags/david/" class="post-tag no-text-decoration" >david</a> <a href="/tags/felipe/" class="post-tag no-text-decoration" >felipe</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Learning Rust with Advent of Code - Day 5 - Hall of Impossible Dreams&url=http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Learning Rust with Advent of Code - Day 5 - Hall of Impossible Dreams&u=http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Learning Rust with Advent of Code - Day 5 - Hall of Impossible Dreams&url=http://hallofdreams.org/posts/advent-of-code-2015-rust-day-5/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://giscus.app">giscus</a>.</p></div><script src="https://giscus.app/client.js" data-repo="thecog19/blog-comments-giscus" data-repo-id="R_kgDOH0cdtg" data-category="Announcements" data-category-id="DIC_kwDOH0cdts4CQ02w" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async> </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/thecog19">Dave and Felipe</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/david/">david</a> <a class="post-tag" href="/tags/felipe/">felipe</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/fiction/">fiction</a> <a class="post-tag" href="/tags/rust/">rust</a> <a class="post-tag" href="/tags/writing-prompts/">writing prompts</a> <a class="post-tag" href="/tags/poetry/">poetry</a> <a class="post-tag" href="/tags/essay/">essay</a> <a class="post-tag" href="/tags/mathematica/">mathematica</a> <a class="post-tag" href="/tags/hatetris/">hatetris</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="http://hallofdreams.org{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> <script async src="https://www.googletagmanager.com/gtag/js?id=183607258"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '183607258'); </script>
